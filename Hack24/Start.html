<!DOCTYPE html>
<html>
<head>
    <title>Hack24</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
<div class="container">
    <div class="jumbotron">
        <h1>Let's play</h1>
        <div class="input-group">
            <span class="input-group-addon" id="basic-addon3">Your name</span>
            <input type="text" class="form-control" id="player-name" aria-describedby="basic-addon3" placeholder="Example: JavaScriptBadass123">
            <div class="input-group-btn">
                <button type="button" class="btn btn-default" id="btn-start-new">Start Game</button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="well" id="output" hidden>
                <h2 id="status"></h2>
                <p id="join-instructions"></p>
            </div>
        </div>
    </div>
</div>
    <script type="text/javascript">
        $(document).ready(function () {

            var apiUrl = 'http://localhost:58191/';

            $('#btn-start-new').click(function (e) {
                e.preventDefault();
                var name = $('#player-name').val();
                var url = apiUrl + 'StartGame/' + encodeURIComponent(name) + '/';

                $.post(url, null, function (data) {
                    var gameRef = data.reference;
                    //alert('Game started - ref: ' + gameRef);

                    $('#status').html('Game Started');
                    var joinUrl = apiUrl + 'Join.html?g=' + gameRef;
                    var instructions = 'To invite others to this game give them this link: <a href="' + joinUrl + '">' + joinUrl + '</a>.';
                    $('#join-instructions').html(instructions);

                    $('#output').removeAttr('hidden');

                }, 'JSON');
            });
        });
    </script>
</body>
</html>
